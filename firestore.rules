rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Photos collection
    match /photos/{photoId} {
      // Allow read for everyone
      allow read: if true;

      // Allow create only if eventTag and name are present
      allow create: if request.resource.data.keys().hasAll(['eventTag', 'name'])
                    && request.resource.data.eventTag is string
                    && request.resource.data.name is string
                    && request.resource.data.eventTag.size() > 0
                    && request.resource.data.name.size() > 0;

      // Deny update and delete
      allow update, delete: if false;
    }
  }
}
